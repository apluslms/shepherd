{% block head %}
<script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.3.1.js"></script>
<script src="{{ url_for('static', filename='helpers.js') }}"></script>
<script>
$(function() {
    var checkbox = $("#new_group");
    
    // Setup an event listener for when the state of the 
    // checkbox changes.
    checkbox.change(function() {
    if (checkbox.is(':checked')) {
        // var parent_group = $("#parent_group");
        var url = "{{ url_for('groups.create_group') }}";
        $.get(url, function() {
            $('#exampleModal.modal-content').html();
            $('#exampleModal').modal();
            
        })
    }
    else {
        // Make sure that the hidden fields are indeed
        // hidden.
        console.log(checkbox.val());
        $("#exampleModal").modal('hide');
    }
    });
    });         
 </script>
{% endblock %}

<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <form id="GroupForm" name="groupForm" action="{{ url_for('groups.create_group') }}" class="form" method="post">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                {% from "_formhelpers.html" import render_field %}
                
                        {{ render_field(form.name) }}
                        {{ render_field(form.parent_path) }}
                        {{ render_field(form.permissions) }}
                        
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </form>
            </div>
        </div>
    </div>